<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../style.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">DSAN 5000: Cannabis and Psychosis</span>
    </a>
  </div>
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://mgb.georgetown.domains" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
          <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/mfgeary" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/marion-geary-bauman" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
</div>
            <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../introduction/introduction.html">Introduction</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About Marion</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/anly501/dsan-5000-project-mfgeary" class="sidebar-item-text sidebar-link"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">Code</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/anly501/dsan-5000-project-mfgeary/tree/main/dsan-website/5000-website/data/raw_data" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raw Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/anly501/dsan-5000-project-mfgeary/tree/main/dsan-website/5000-website/data" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clean Data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction/introduction.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data-collection/data-collection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Gathering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data-cleaning/data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Cleaning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../eda/eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Exploration</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../naive-bayes/naive-bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Na√Øve Bayes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../clustering/work-in-progress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dim-reduction/work-in-progress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dimensionality Reduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Decision Trees</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../decision-tree/classification/work-in-progress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../decision-tree/regression/work-in-progress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../arm/work-in-progress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ARM</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../conclusions/work-in-progress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conclusions</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#cannabis-harmless-or-hazardous" id="toc-cannabis-harmless-or-hazardous" class="nav-link active" data-scroll-target="#cannabis-harmless-or-hazardous">Cannabis: Harmless or Hazardous?</a>
  <ul class="collapse">
  <li><a href="#survey-of-existing-research" id="toc-survey-of-existing-research" class="nav-link" data-scroll-target="#survey-of-existing-research">Survey of Existing Research</a></li>
  <li><a href="#data-science-research-project" id="toc-data-science-research-project" class="nav-link" data-scroll-target="#data-science-research-project">Data Science Research Project</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="cannabis-harmless-or-hazardous" class="level1">
<h1>Cannabis: Harmless or Hazardous?</h1>
<section id="survey-of-existing-research" class="level2">
<h2 class="anchored" data-anchor-id="survey-of-existing-research">Survey of Existing Research</h2>
<p>As the stigma surrounding the usage of recreational drugs has lessened in recent years, many have called for the legalization of some illicit substances. In particular, law makers and lobbyists have considered the legalization of cannabis, also known as marijuana, due to its prevalence, medicinal properties, and low addictiveness. In fact, while cannabis is still illegal at the federal level, 23 states and D.C. have fully legalized marijuana for medical and recreational purposes, and 38 states have legalized marijuana usage for medical purposes<span class="citation" data-cites="disa_marijuana_nodate">(<a href="#ref-disa_marijuana_nodate" role="doc-biblioref">DISA n.d.</a>)</span>.</p>
<p><img src="../images/legalization-map.png" class="img-fluid"><span class="citation" data-cites="disa_marijuana_nodate">(<a href="#ref-disa_marijuana_nodate" role="doc-biblioref">DISA n.d.</a>)</span></p>
<p>However, there is also a growing body of research that indicates that cannabis usage can be linked to episodes of psychosis and trigger the development of schizophrenia. Research has show that there is ‚Äúan association between cannabis use and psychosis‚Äù, but the question about causation remains open <span class="citation" data-cites="ganesh_cannabis_2022">(<a href="#ref-ganesh_cannabis_2022" role="doc-biblioref">Ganesh and D‚ÄôSouza 2022</a>)</span>. Increasingly, people are starting to use cannabis at a younger age and with more frequency, resulting in more questions about the health impact of such usage <span class="citation" data-cites="ganesh_cannabis_2022">(<a href="#ref-ganesh_cannabis_2022" role="doc-biblioref">Ganesh and D‚ÄôSouza 2022</a>)</span>. Furthermore, there has been a rising level of THC, the active ingredient in cannabis, in recent years. The average potency of THC in cannabis has increased from 3% in the 1960‚Äôs to 16% in England<span class="citation" data-cites="murray_traditional_2016">(<a href="#ref-murray_traditional_2016" role="doc-biblioref">Murray et al. 2016</a>)</span>. Research has ‚Äúrobustly deomnstrated that THC can transiently induce clinically relevant acute schizophrenia-like symptoms‚Äù, meaning that THC has been show to cause episodes of psychosis <span class="citation" data-cites="ganesh_cannabis_2022">(<a href="#ref-ganesh_cannabis_2022" role="doc-biblioref">Ganesh and D‚ÄôSouza 2022</a>)</span>. On the other hand, genetic research has indicated that schizophrenia may be the causation of cannabis usage, leading to continue debate on the causality of this relationship <span class="citation" data-cites="ganesh_cannabis_2022">(<a href="#ref-ganesh_cannabis_2022" role="doc-biblioref">Ganesh and D‚ÄôSouza 2022</a>)</span>. A meta analysis of relevant research supports the possibility of ‚Äúcannabis <em>causing</em> psychosis‚Äù, but the approach has limitations (deepak 9). It is also notable that cannabis use alone is ‚Äúneither necessary nor sufficient for psychosis‚Äù, meaning other factors such as genetics are relevant for the development of psychosis <span class="citation" data-cites="ganesh_cannabis_2022">(<a href="#ref-ganesh_cannabis_2022" role="doc-biblioref">Ganesh and D‚ÄôSouza 2022</a>)</span>. Ganesh and D‚ÄôSouza note that the increasing legalization and usage of cannabis must be studied closely, as it will elucidate whether there is a causational relationship between marijuana and psychosis.</p>
<p>Related to the usage of cannabis is the growing use of cannabinoids, substances that are closely related to cannabis. Examples of cannnabinoids include synthetic THC and CBD which have become prevalent through a ‚Äúregulatory loophold‚Äù in 2018 <span class="citation" data-cites="dotson_unknown_2022">(<a href="#ref-dotson_unknown_2022" role="doc-biblioref">Dotson et al. 2022</a>)</span>. Often, these substances are sold in very high concentrations that can lead to unknown risks. Research has shown tha ‚Äúcannabis use was associated with an odds ratio of 1.4 for the development of schizophrenia‚Äù, and there is evidence for a risk of addiction to THC similar to other illicit substances. Even more concerning, research in Europe also indicates that rising THC levels and rising ‚Äúfirst episode pyschosis admissions‚Äù to hospitals have coincided <span class="citation" data-cites="dotson_unknown_2022">(<a href="#ref-dotson_unknown_2022" role="doc-biblioref">Dotson et al. 2022</a>)</span>.</p>
<p>In the U.S., approaches such as ‚Äúvaping‚Äù and ‚Äúdabbing‚Äù allow users to ingest THC in concentrations of up to 80% <span class="citation" data-cites="murray_traditional_2016">(<a href="#ref-murray_traditional_2016" role="doc-biblioref">Murray et al. 2016</a>)</span>. These synthetic cannabinoids are much more dangerous that cannabis, increasing the risk of hospitalization by 30% <span class="citation" data-cites="murray_traditional_2016">(<a href="#ref-murray_traditional_2016" role="doc-biblioref">Murray et al. 2016</a>)</span>. The first scientific study on the connection between cannabis and psychosis was led by Andreasson in 1987, and longitudinal studies have indicated an association between cannabis and psychosis, though not all results have been statistically significant <span class="citation" data-cites="murray_traditional_2016">(<a href="#ref-murray_traditional_2016" role="doc-biblioref">Murray et al. 2016</a>)</span>. There is evidence that genetic predisposition plays a role in the development of psychosis and can be trigger by cannabis usage, but it is unclear if cannabis and psychosis are associated without genetic predisposition <span class="citation" data-cites="murray_traditional_2016">(<a href="#ref-murray_traditional_2016" role="doc-biblioref">Murray et al. 2016</a>)</span>.</p>
</section>
<section id="data-science-research-project" class="level2">
<h2 class="anchored" data-anchor-id="data-science-research-project">Data Science Research Project</h2>
<p>The increasing legalization of cannabis despite research indicating an association between cannabis and psychosis has motivated me to perform data-driven research on the correlation between cannabis usage and the development of psychosis. Some motivating questions include:</p>
<ul>
<li>Is cannabis usage a predictor of the development of a psychotic episode?</li>
<li>Is cannabis usage a predictor of the development of a psychotic disorder, such as schizophrenia?</li>
<li>How does THC content contribute to the potential development of psychosis?</li>
<li>Has the legalization of cannabis contributed to an increase in the prevelance of psychotic disorders?</li>
<li>What role do genetics play in the development of a psychotic disorder? How does cannabis usage impact genetics?</li>
<li>How does age impact the development of psychosis due to cannabis usage?</li>
<li>How does frequency of cannabis usage impact the potential development of psychosis? The number of psychotic episodes?</li>
<li>What is the public sentiment regarding cannabis?</li>
<li>Does public sentiment indicate an awareness of the dangers of cannabis, especially as related to psychosis?</li>
<li>What is the public sentiment regarding cannabinoids such as CBD and THC products?</li>
</ul>
<p>Overall, the goal of this research is two-fold: (1) to perform a thorough, analytic analysis to assess the causational role of cannabis in the development of psychosis; and (2) gain insights into why legalization efforts have continued despite the severity of known risks associated with cannabis usage. My hypotheses are that cannabis does play a causal role in psychosis and development of schizophrenia and that public knowledge on the risks of cannabis usage have been poorly communicated and understated.</p>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-disa_marijuana_nodate" class="csl-entry" role="listitem">
DISA. n.d. <span>‚Äú<span>MARIJUANA</span> <span>LEGALITY</span> <span>BY</span> <span>STATE</span> - <span>Updated</span> <span>Sept</span> 1, 2023.‚Äù</span> <em>DISA</em>. Accessed September 22, 2023. <a href="https://disa.com/marijuana-legality-by-state">https://disa.com/marijuana-legality-by-state</a>.
</div>
<div id="ref-dotson_unknown_2022" class="csl-entry" role="listitem">
Dotson, Samuel, Kelly Johnson-Arbor, Randi M. Schuster, Brenden Tervo-Clemmens, and A. Eden Evins. 2022. <span>‚ÄúUnknown Risks of Psychosis and Addiction with Delta-8-<span>THC</span>: <span>A</span> Call for Research, Regulation, and Clinical Caution.‚Äù</span> <em>Addiction</em> 117 (9): 2371‚Äì73. <a href="https://doi.org/10.1111/add.15873">https://doi.org/10.1111/add.15873</a>.
</div>
<div id="ref-ganesh_cannabis_2022" class="csl-entry" role="listitem">
Ganesh, Suhas, and Deepak Cyril D‚ÄôSouza. 2022. <span>‚ÄúCannabis and <span>Psychosis</span>: <span>Recent</span> <span>Epidemiological</span> <span>Findings</span> <span>Continuing</span> the <span>‚Äò<span>Causality</span> <span>Debate</span>‚Äô</span>.‚Äù</span> <em>American Journal of Psychiatry</em>, January. <a href="https://doi.org/10.1176/appi.ajp.2021.21111126">https://doi.org/10.1176/appi.ajp.2021.21111126</a>.
</div>
<div id="ref-murray_traditional_2016" class="csl-entry" role="listitem">
Murray, Robin M., Harriet Quigley, Diego Quattrone, Amir Englund, and Marta Di Forti. 2016. <span>‚ÄúTraditional Marijuana, High-Potency Cannabis and Synthetic Cannabinoids: Increasing Risk for Psychosis.‚Äù</span> <em>World Psychiatry</em> 15 (3): 195‚Äì204. <a href="https://doi.org/10.1002/wps.20341">https://doi.org/10.1002/wps.20341</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Authored by Marion Geary Bauman, 2023</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mfgeary">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/marion-geary-bauman">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>